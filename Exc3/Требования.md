# Требования к безопасности интеграции с системой Умный Дом

## Описание взаимодействия с системой Умный Дом

> Сервисы PropDevelopment не хранят фото лиц посетителей для автоматического открытия дверей и номера а/м для автоматического открытия шлагбаума. Эти данные хранятся в системе Умный Дом. В связи с этим требуется подписание договора об обработке персональных данных между собственником и поставщиком услуг Умный Дом. При этом, иные данные о собственнике поставщику услуг Умный Дом не предоставляются.

Инициатором установки всех соединений между системами PropDevelopment и Умный Дом является система PropDevelopment. Обмен данными между сервисами `smart-home-app`, `smart-home-notification` и системой Умный Дом происходит по HTTP, поэтому для аутентификации применяется API-ключ, который выдается провайдером услуг. Передача аудио/видеопотока между сервисом `intercom-videostream-gateway` и системой Умный Дом происходит по TCP, поэтому для аутентификации используется mTLS.

## Требования к безопасности

1. Входящие подключения из внешнего контура к сервисам компании должны быть блокированы.
2. Сервисы для системы Умный Дом должны работать в отдельной подсети.
3. Сервисы компании для работы с системой Умный Дом должны работать в отдельном namespace k8s.
4. Безопасность обмена данными между системами должна обеспечиваться путем использования TLS версии 1.3.
5. API-ключ и клиентский сертификат должны переодически обновляться.
6. API-ключ и клиентский сертификат для доступа к системе Умный Дом должны храниться в секретах. Управление секретами должно осуществляться соответствующей системой, например CyberArk Conjure.
7. Необходимо формировать аудит-логи операций выполняемых сервисами для взаимодействия с системой Умный Дом.